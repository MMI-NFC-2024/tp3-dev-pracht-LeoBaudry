---
import Layout from "../layouts/Layout.astro";
import GraphicSpecies from "../components/GraphicSpecies.astro";
---

<Layout>
  <div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
    <h1 class="text-4xl font-bold text-center mb-2 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
      TP3 - Tous les graphiques
    </h1>
    <p class="text-center text-gray-600 text-lg mb-8">Explorez les donn√©es de chaque esp√®ce</p>

    <nav class="flex justify-center gap-6 mb-8">
      <a href="#Adelie" class="px-8 py-4 bg-orange-500 text-white rounded-full font-semibold text-lg transition-all duration-300 hover:bg-orange-600 hover:scale-105 shadow-lg hover:shadow-xl">
        üêß Adelie
      </a>
      <a href="#Gentoo" class="px-8 py-4 bg-teal-500 text-white rounded-full font-semibold text-lg transition-all duration-300 hover:bg-teal-600 hover:scale-105 shadow-lg hover:shadow-xl">
        üêß Gentoo
      </a>
      <a href="#Chinstrap" class="px-8 py-4 bg-purple-500 text-white rounded-full font-semibold text-lg transition-all duration-300 hover:bg-purple-600 hover:scale-105 shadow-lg hover:shadow-xl">
        üêß Chinstrap
      </a>

    <select id="species-select" class="px-4 py-2 rounded-lg border border-gray-300 bg-white text-gray-700 shadow-sm hover:shadow-md transition">
      <option value="#Adelie">üêß Adelie</option>
      <option value="#Gentoo">üêß Gentoo</option>
      <option value="#Chinstrap">üêß Chinstrap</option>
    </select>
    </nav>

    <div class="slider-container overflow-x-auto pb-4">
      <div class="flex gap-8" style="scroll-behavior: smooth; scroll-snap-type: x mandatory;">
        <section id="Adelie" class="min-w-[800px] flex-shrink-0" style="scroll-snap-align: start;">
          <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-orange-200">
            <div class="flex items-center mb-6">
              <div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center text-white text-xl font-bold mr-4 shadow-lg">A</div>
              <h2 class="text-3xl font-bold text-orange-700">Manchots Adelie</h2>
            </div>
            <GraphicSpecies species="Adelie" />
          </div>
        </section>

        <section id="Gentoo" class="min-w-[800px] flex-shrink-0" style="scroll-snap-align: start;">
          <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-teal-200">
            <div class="flex items-center mb-6">
              <div class="w-12 h-12 bg-teal-500 rounded-full flex items-center justify-center text-white text-xl font-bold mr-4 shadow-lg">G</div>
              <h2 class="text-3xl font-bold text-teal-700">Manchots Gentoo</h2>
            </div>
            <GraphicSpecies species="Gentoo" />
          </div>
        </section>

        <section id="Chinstrap" class="min-w-[800px] flex-shrink-0" style="scroll-snap-align: start;">
          <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-purple-200">
            <div class="flex items-center mb-6">
              <div class="w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold mr-4 shadow-lg">C</div>
              <h2 class="text-3xl font-bold text-purple-700">Manchots Chinstrap</h2>
            </div>
            <GraphicSpecies species="Chinstrap" />
          </div>
        </section>
      </div>
    </div>

    <div class="flex justify-center mt-6 gap-3">
      <div class="w-3 h-3 rounded-full bg-orange-400 opacity-70"></div>
      <div class="w-3 h-3 rounded-full bg-teal-400 opacity-70"></div>
      <div class="w-3 h-3 rounded-full bg-purple-400 opacity-70"></div>
    </div>
  </div>

  <!-- Script pour g√©rer les ancres via JS -->
<script>
  const anchorLinks = document.querySelectorAll('nav a[href^="#"]');
  const select = document.getElementById('species-select') as HTMLSelectElement;

  // Ancres : scroll doux + hash
  anchorLinks.forEach(link => {
    link.addEventListener("click", e => {
      e.preventDefault();
      const targetId = link.getAttribute("href");
      if (!targetId) return;
      window.location.hash = targetId;
      document.querySelector(targetId)?.scrollIntoView({ behavior: "smooth" });
      select.value = targetId; // synchronise le select
    });
  });

  // Select : scroll doux + hash
  select.addEventListener("change", e => {
    const targetId = select.value;
    if (!targetId) return;
    window.location.hash = targetId;
    document.querySelector(targetId)?.scrollIntoView({ behavior: "smooth" });
  });

  // Si l'utilisateur arrive avec un hash d√©j√† pr√©sent
  const hash = window.location.hash;
  if (hash && select) select.value = hash;
</script>
</Layout>

<style>
html { scroll-behavior: smooth; }
.slider-container { scroll-behavior: smooth; scroll-snap-type: x mandatory; scrollbar-width: thin; scrollbar-color: rgba(59,130,246,0.5) rgba(0,0,0,0.1); }
.slider-container::-webkit-scrollbar { height:8px; }
section > div { transition: all 0.3s ease; }
@media(max-width:1024px){section{min-width:600px;}}
@media(max-width:768px){section{min-width:90vw;} nav{flex-direction:column;gap:4;} nav a{padding:12px 24px;text-align:center;}}
</style>
